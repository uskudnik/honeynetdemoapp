<!doctype html>
<html>
<head>
    <title>demo syslog parser</title>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script type="text/javascript">

sample_syslog_data = [
"May 12 14:13:33 neo mdworker[4257]: Unable to talk to lsboxd",
"May 12 14:13:33 neo sandboxd[4258] ([4257]): mdworker(4257) deny mach-lookup com.apple.ls.boxd",
"May 12 14:13:34 neo kernel[0]: Sandbox: sandboxd(4258) deny mach-lookup com.apple.coresymbolicationd",
"May 12 14:14:34 neo mdworker[4260]: Unable to talk to lsboxd",
"May 12 14:14:34 neo sandboxd[4261] ([4260]): mdworker(4260) deny mach-lookup com.apple.ls.boxd",
"May 12 14:14:34 neo kernel[0]: Sandbox: sandboxd(4261) deny mach-lookup com.apple.coresymbolicationd",
]


var rmax = 1500;
var rmin = 10;

var imax = 10;

var identify_components_re = "([A-Z]{1}[a-z]{1,} [0-9]{1,2} [0-9]{2}:[0-9]{2}:[0-9]{2}) ([a-zA-Z]+) ([^:]+):(.+)";

var re = new RegExp(identify_components_re);

function syslog_parser(line) {
    var components = line.match(identify_components_re);
    var data_elements = components.slice(1,components.length);

    // var date = data_elements[0]
    // var username = data_elements[1]
    // var process = data_elements[2]
    // var message = data_elements[3]

    data_elements[0] = new Date(data_elements[0])

    return data_elements;
}

function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
}

function data_generator() {
    setTimeout(function(){
    // console.log("foo: ",
    //     );

    var d = sample_syslog_data[randomInt(0, sample_syslog_data.length)];
    
    // console.log(new Date())

    // console.log(sample_syslog_data.length, randomInt(0, sample_syslog_data.length));

    console.log(syslog_parser(d));

    imax--;
    if (imax > 0)
        data_generator();
    }, Math.random() * (rmax - rmin) + rmin);
}

data_generator();

</script>
</head>
<body>

</body>
</html>